## 组合模块容器和控制器

1. 有四种容器:
   * 布局容器:容器可以对子组件进行布局以及批量操作组件
   * 条件容器:可以绑定一个变量控制下面的组件是否显示隐藏
   * 循环容器:可以绑定一个列表,实现循环显示多个条目,列表页和动态模块比较常用
   * 弹出层容器:这个容器可以快速制作弹出层

 布局容器:

支持绑定ID/背景颜色/图片/边框/宽高

高级动态绑定,布局快捷设置

滑动容器:滑动到具体ID的容器 scrollIntoView

通过给滑动容器内的布局容器绑定唯一ID,在动态修改滑动容器的scrollIntoView参数,可以实现自动滑动到ID所在容器,

使用组合模块开发应用:

布局方式支持:

* 拖拽布局:适合固定布局,设计效率高
* 弹性布局:适合内容大小不固定,响应式布局
* 不同布局方式之间可以随时无缝切换

编辑步骤

* 第一步:针对对应平台创建对应组合模块
* 第二步:添加组件
* 第三步:绑定数据和事件

组合模块开发应用三大部分

* 布局和样式编辑
* 原子组件体系
* 数据绑定和控制器

组合模块控制器

概念:组合模块最重要的原则是设计和逻辑控制分离(类似于程序中的数据与逻辑分离),即如何让



vuex是一个专为Vue.js应用程序开发的状态管理模式,它采用集中式存储管理应用的所有组件的状态,并以性应的规则保证状态以一种可预测的方式发生变化

state 驱动应用的数据源

view  以声明方式将state映射到视图

 actions 响应在view上的用户输入导致的状态变化

```
				=>		Actions     =>
						
				View      <=<=<=    state
```

控制器 

state Function 初始状态

getters Object  映射状态

mutations Object 修改状态

actions  Object  自定义逻辑函数

## 列表页



关于控制器的使用

事件监听:

* 新增自定义函数
* 新增计算属性
* 当初始化数据时
* 当组件加载时
* 当组件显示时
* 当组件显示完成时
* 当组件隐藏时
* 当组件卸载时
* 当下拉刷新时
* 当上拉触底时
* 当页面滚动时

我们要用控制器 至少要有三个监听

1. 当初始化数据:create
2. 当组件显示时:就是我们之前所谓的onshow
3. 自定义函数:就是我们之前所谓的method

比如简单的获取数据集中某表的数据,并将其渲染出来

首先我们要初始化一些数据 例如 定义一个列表 items[]用它来接收数据集中的数据

我们还得有一个query对象 ,去查找数据时方便进行过滤筛选

query对象里又包含有 limit 分页大小,和offset 分页偏移量,

最后我们要确定一个reachBottom 去判断是否加载完成

true 为加载完成 false为未完成



在onshow也就是当组件显示时,选择动作调用函数,调用的函数是我们自定义的函数



自定义函数 

简单实现有两个步骤

1. 是我们的调用系统接口

   选择数据集接口/查询数据   后面表就是我们所要查询的数据表

   在这会出现一个action,这个action就是你查到数据的那个对象,

2. 修改状态数据

   我们所想要的数据在哪呢?在这个action下面的objects,这个objects就是我们想要的数据的列表,将这个objects赋值给我们之前所初始化的state.items 然后就可以去页面里配置组件了.

3. 配置组件的话,我们要展示一个列表,肯定得用for循环去展示,所以这里有一个循环组件,我们点击新建一个循环组件,然后给这个循环组件绑定上我们控制器里获取到的数据列表,也就是items,然后呢,我们在循环组件下面可以新建一个子模块组件,这个组件的作用就是类似我们在HTML里的td 或者li ,它可以获取我们循环组件的里的每一项,然后渲染到页面上,这里还显示不出我们的数据,还需要在子模块组件中创建几个基本组件,例如 我们要获取价格,图片,名称,我们就得创建三个组件 ,然后给这三个组件绑定上循环条目里的内容,这里的内容就是我们这个数据表在数据集中的字段.,这样我们就可以获取到商品的全部信息.

稍微复杂一些 ,会在加载函数中添加一些判断,也就是if.主要判断什么呢,判断我们的数据是否展示完全,如果展示不完全就跳到展示不完全的那个监听事件执行它下面的函数,然后在继续将没加载出来的项加载出来

// 这里的循环组件为循环容器,链接组件为链接 容器

之后就是实现我们的点击商品进行页面跳转,如何跳转呢?

在我们之前的组件里没有跳转组件.我们可以在循环组件下面定义一个链接组件,这个链接组件的绑定属性有 应用页面这个属性,将这个属性的数据选择为常量,后面跟着的参数就是我们所要跳转页面的slug,这里注意的是字符串形式.key1属性 也为常量后面跟着uuid 这里也是字符串形式





## 分类页

先定义state.items为一个数组 ,一会便于将查到的数据存放进去

然后定义一个activeMainId和item 一个是获取查到数据的第一个对象的id,另一个是获取查到数据的第一个对象

分类页,功能就是点击父分类,会展示出子类,所以我们要绑定一个事件 给点击父分类,可是如何查数据只能查到父分类呢,这就需要我们在查询函数中的参数中进行加条件过滤筛选了,

先说参数里面有哪些配置:

有基础配置,有字段配置,关联查询,聚合查询,排除与排序,整体配置

这些配置都有什么作用呢

其中 基础配置就是 

tablename   

limit

offset

返回的类型

查询条件()其实这个就是我们之前的过滤器 filter

这里我们就可以进行筛选了,我们只想要拿得是父分类,该如何筛选呢,我们就进行关于每个数据筛选,如果它里面分类外键为null,那么则这个分类没有上级分类,所以这个就是我们所想要拿得对象

字段配置:可以配置返回的数据中只包含下列字段,部分系统字段和所有外键不可隐藏.

意思就是在字段那里可以勾选,是否将这个字段返回

除了(uuid和id)必须返回,其他都可以选择不返回

关联查询:展开并勾选可以查询关联数据,只勾选需要的数据以提高性能,支持通过查询条件进一步限制查询结果

可以分为两大类

表[分类]关联的数据,关联到表[分类]的多个数据

一个是一对多,一个是多对一

然后就是我们将获取到的数据分别在对应的组件中绑定数据.

